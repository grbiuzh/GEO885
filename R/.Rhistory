amm_economy$cabin_class[amm_economy$cabin_class == "first"] <- "economy"
write.csv(amm_business, file = "amm_business.csv", row.names=FALSE) # Emissions API geht mit beiden files oben, Datensatz
write.csv(amm_economy, file = "amm_economy.csv", row.names=FALSE) # Emissions API geht mit beiden files oben, Datensatz
amm$EMISSIONS_KGCO2EQ <- as.numeric(amm$EMISSIONS_KGCO2EQ)
amm <- amm %>% drop_na(EMISSIONS_KGCO2EQ)
amm_distance <- amm
(nrow(amm)/nrow(amm_incomplete))*100
amm_arr <- left_join(amm,airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_arr <- amm_arr %>% rename(arr_coordinates = coordinates,
arr_country = iso_country)
amm <- left_join(amm,airports, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm <- amm %>% rename(dep_coordinates = coordinates,
dep_country = iso_country)
amm <- left_join(amm,airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm <- amm %>% rename(arr_coordinates = coordinates,
arr_country = iso_country)
drop <- c("id.x", "id.y")
amm = amm[,!(names(amm) %in% drop)]
amm_distance <- left_join(amm_distance,airports, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm_distance <- left_join(amm_distance, airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_distance <- amm_distance %>% rename(dep_lon = longitude_deg.x,
dep_lat = latitude_deg.x,
arr_lon = longitude_deg.y,
arr_lat = latitude_deg.y)
amm_distance <- amm_distance %>% rowwise() %>%
mutate(distance_km = (geosphere::distHaversine(c(dep_lon, dep_lat),
c(arr_lon, arr_lat)))/1000)
emissions_per_class <- amm %>%
group_by(year, cabin_class) %>%
summarise(total_emissions = sum(EMISSIONS_KGCO2EQ))
aggregated_distance <- amm_distance %>%
group_by(year) %>%
summarise(total_distance = sum(distance_km))
max_distance <- max(aggregated_distance$total_distance)
red <- wes_palette("Darjeeling1")[1]
green <- wes_palette("Darjeeling1")[2]
orange <- wes_palette("Darjeeling1")[3]
blue <- wes_palette("Darjeeling1")[5]
dark_orange <- wes_palette("Darjeeling1")[4]
black <- wes_palette("Darjeeling2")[5]
eco2 <- ggplot(emissions_per_class, aes(fill=cabin_class, y=total_emissions, x=year)) +
geom_bar(position="stack", stat="identity") +
scale_fill_discrete(name = "Reason for travel")+
ggtitle("Cabin class for each flight at MNF (2018-2020)") +
xlab("") +
ylab("emissions [kgCO2]") +
scale_y_continuous(label=comma,
limits=c(0,max_distance*1.02)) +
theme_bw() +
theme(legend.position = c(0.86, 0.7))
eco2
ggsave(file="flight_class.png", eco2,
width = 10,
height= 7)
arrdep <- ggplot() +
geom_sf(data=world)+
geom_sf(data = amm, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = amm, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23) +
ggtitle("Departure and arrival locations for all GIUZ flights separated by symbols")+
xlab("Longitude") + ylab("Latitude")+
scale_color_manual(labels = c("Arrival", "Departure"),
values = c("red", "blue"))+
labs(colour = "Flight path")+
theme(legend.position = "none")
arrdep
ggsave(file="flight_locations.png", arrdep,
width = 10,
height= 7)
#https://www.gis-blog.com/flight-connection-map-with-r/
usairports <- filter(airports, lat < 48.5)
amm_arr <- st_as_sf(amm_arr)
# sf::sf_use_s2(FALSE)
flightmap <- st_join(world, amm_arr, join = st_contains_properly, left=TRUE)
flightmap_sort <- flightmap %>% group_by(NAME) %>% count()
sf::sf_use_s2(FALSE)
amm_arr <- st_as_sf(amm_arr)
# sf::sf_use_s2(FALSE)
flightmap <- st_join(world, amm_arr, join = st_contains_properly, left=TRUE)
flightmap_sort <- flightmap %>% group_by(NAME) %>% count()
# create map
ggplot() +
geom_sf(data=world)+
geom_sf(data = flightmap_sort, aes(fill = n)) +
labs(fill = "Locations per country") +
scico::scale_fill_scico(palette = "bilbao")+
theme(panel.grid.minor = element_blank())+
ggtitle("Arrival locations for all GIUZ flights counnted by country")+
xlab("Longitude") + ylab("Latitude")+
theme(legend.position = "none")
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
cc_count_in <- amm_incomplete %>%
group_by(cabin_class) %>%
summarise(cnt = n()) %>%
mutate(freq = round(cnt / sum(cnt), 2)) %>%
arrange(desc(freq))
cc_count_com <- amm %>%
group_by(cabin_class) %>%
summarise(cnt = n()) %>%
mutate(freq = round(cnt / sum(cnt), 2)) %>%
arrange(desc(freq))
reference_period <- c(2018:2020)
target_period <- c(2022, 2030)
full_period <- c(2018:2030)
aggregated_uzh <- amm %>%
group_by(year) %>%
summarise(total_emission = sum(EMISSIONS_KGCO2EQ, na.rm=TRUE)) %>%
mutate(total_emission_3y_mean = slide_dbl(total_emission, mean,
.before = 1, .after = 1,
.complete = T))
# UZH: only 2018 and 2019
uzh_baseline_co2 <- aggregated_uzh %>%
filter(year %in% reference_period[]) %>%
summarize(mean = mean(total_emission, na.rm=TRUE)) %>%
pull(mean)
# Define target
uzh_target_co2 <- data.frame(x=target_period,
y=c(uzh_baseline_co2,
(uzh_baseline_co2/100)*0.47))
max_co2 <- max(aggregated_uzh$total_emission)
View(amm_business)
View(amm_economy)
View(amm_incomplete)
View(emissions_per_class)
View(flightmap)
View(amm)
View(amm)
View(EUISO2)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
View(EUISO2)
View(world)
View(amm_arr)
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
EUISO2 %>%
rename(
ï..Name = Name)
EUISO2 %>%
rename(ï..Name = Name)
EUISO2 %>% rename(Name= ï..Name)
View(EUISO2)
View(EUISO2)
View(EUISO2)
names(EUISO2)[1] <- "Name"
View(EUISO2)
arrdep <- ggplot() +
geom_sf(data=world)+
geom_sf(data = amm, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = amm, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23) +
ggtitle("Departure and arrival locations for all GIUZ flights separated by symbols")+
xlab("Longitude") + ylab("Latitude")+
scale_color_manual(labels = c("Arrival", "Departure"),
values = c("red", "blue"))+
labs(colour = "Flight path")+
theme(legend.position = "none")
arrdep
ggsave(file="flight_locations.png", arrdep,
width = 10,
height= 7)
View(amm)
View(world)
View(cc_count_com)
View(cc_count_in)
View(airports)
View(aggregated_uzh)
View(aggregated_distance)
View(flightmap)
View(arrdep)
View(amm_incomplete)
View(cc_count_com)
View(cc_count_in)
View(flightmap_sort)
amm_europe <- table(amm[ which(amm$dep_country %in% EUISO2$ISO2)])
amm_europe <- left_join(amm, EUISO2, by = c("dep_country" = "ISO2"))
View(amm_europe)
amm_europe <- left_join(amm, EUISO2, by = c("dep_country" = "ISO2", "arr_country"= "ISO2"))
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
amm_europe  = amm %>% left_join(EUISO2, by = c("dep_country" = "ISO2" | "arr_country"= "ISO2"))
amm_europe  <- amm %>% left_join(EUISO2, by = c("dep_country" = "ISO2" | "arr_country"= "ISO2"))
amm_europe  <- amm %>% left_join(EUISO2) %>%
filter(dep_country == ISO2 | arr_country == ISO2)
amm_europe  <- amm %>% left_join(EUISO2, by = c("dep_country" == "ISO2" | "arr_country"== "ISO2"))
amm_europe  <- amm %>%
left_join(EUISO2, by = c(dep_country == ISO2 | arr_country== ISO2))
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
amm_europe  <- inner_join(amm, EUISO2, by = c("dep_country", "arr_country" = "ISO2"))
amm_europe  <- amm[EUISO2$ISO2 %in% amm$dep_country, amm$arr_country,]
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
amm_europe  <- amm[EUISO2$ISO2 %in% amm$dep_country, amm$arr_country,]
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
amm_europe  <- amm[EUISO2$ISO2 %in% amm$dep_country | EUISO2$ISO2 %in%  amm$arr_country,]
View(amm_europe)
View(world)
europe  <- EUISO2 %>%  left_join(world, by = c(ISO2 = ISO2))
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- EUISO2 %>%  left_join(world, by = c("ISO2" = "ISO2"))
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- world %>%  left_join(EUISO2, by = c("ISO2" = "ISO2"))
View(europe)
europe_arr <- amm %>% left_join(europe, by = c("ISO2" = "ISO2"))
europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe_arr)
View(europe_arr)
View(europe_arr)
europe  <- merge(EUISO2, world, by = "ISO2", all.x=TRUE)[,c("ISO2","LON","LAT", "geometry")]
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- merge(EUISO2, world, by = "ISO2", all.x=TRUE)[,c("ISO2","LON","LAT", "geometry")]
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- merge(world, EUISO, by = "ISO2", all.x=TRUE)[,c("ISO2","LON","LAT","geometry")]
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- merge(world, EUISO2, by = "ISO2", all.x=TRUE)[,c("ISO2","LON","LAT","geometry")]
europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe)
View(arrdep)
europe_arr <- europe %>% left_join(amm, by = c("ISO2" = "arr_country"))
View(europe_arr)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- merge(world, EUISO2, by = "ISO2", all.x=TRUE)[,c("ISO2","LON","LAT","geometry")]
europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe_arr)
View(amm_arr)
View(europe)
View(EUISO2)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- EUISO2 %>%  left_join(world, by = c("ISO2" = "ISO2"))
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- EUISO2 %>%  right_join(world, by = c("ISO2" = "ISO2"))
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(EUISO2)
europe  <- EUISO2 %>%  join(world, by = c("ISO2" = "ISO2"))
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- EUISO2 %>%  join(world, by = c("ISO2" = "ISO2"))
europe  <- EUISO2 %>%  full_join(world, by = c("ISO2" = "ISO2"))
View(europe)
europe  <- EUISO2 %>%  inner_join(world, by = c("ISO2" = "ISO2"))
View(europe)
View(world)
europe  <- EUISO2 %>%  left_join(world, by = c("ISO2" = "ISO2"))
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- EUISO2 %>%  left_join(world, by = ISO2))
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- EUISO2 %>%  left_join(world, by = ISO2)
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- EUISO2 %>%  left_join(world, by = "ISO2")
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- world %>%  left_join(EUISO2, by = "ISO2")
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- subset(wordl, ISO2 %in% EUISO2$ISO2)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- subset(world, ISO2 %in% EUISO2$ISO2)
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <- EUISO2 %>% filter(ISO2 %in% world$ISO2)
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
View(EUISO2)
europe  <-EUISO2 %>%  merge(world, EUSISO$ISO2 = world$ISO2)
europe  <-merge(EUISO, world, by.x = "ISO2", by.y = "ISO2")
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe  <-merge(EUISO2, world, by.x = "ISO2", by.y = "ISO2")
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(world)
class(EUISO2$ISO2)
View(EUISO2)
ISO2 <-class(EUISO2$ISO2)
ISO2 <-EUISO2$ISO2
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe <- world[world$ISO2 %in% EUISO2$ISO2,]
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
View(europe)
europe <- world %>% subset(world$ISO2 = ISO2)
europe <- world %>% subset(world$ISO2 == ISO2)
View(europe)
europe <- EUISO2 %>% right_join(world, by = "ISO2")
View(europe)
europe <- left_join(EUISO2, world, by = c("ISO2" = "ISO2"))
View(europe)
europe <- full_join(EUISO2, world, by = c("ISO2" = "ISO2"))
europe <- left_join(EUISO2, world, by = c("ISO2" = "ISO2"))
View(world)
europe <- left_join(world, EUISO2, by = c("ISO2" = "ISO2"))
View(europe)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe <- filter(world, ISO2 %in% EUISO2$ISO2)
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
europe <- filter(EUISO2, ISO2 %in% world$ISO2)
View(europe)
View(EUISO2)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
europe<- merge(unique(EUISO2), world)
View(europe)
europe<- merge(unique(world), EUISO2)
europe<- merge(unique(world), EUISO2)
View(europe)
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
world$ISO2
europe<- world[which(world$ISO2 %in% unique(EUISO2$ISO2)),]
View(europe)
europe<- EUISO2[which(EUISO2$ISO2 %in% unique(world$ISO2)),]
View(europe)
europe<- world[which(world$ISO2 %in% unique(EUISO2)),]
View(europe)
View(EUISO2)
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
europe<- world[which(world$ISO2 %in% unique(EUISO2)),]
#europe_arr <- amm %>% left_join(europe, by = c("arr_country" = "ISO2"))
world$ISO2
View(europe)
europe<- left_join(EUISO2, world)
View(europe)
europe$Name <- europe$SUBREGION <- europe$POP2005 <- europe$FIPS <- NULL
View(europe)
View(amm)
europe_arr <- amm %>% left_join(EUISO2, by = c("dep_country" = "ISO2" | "arr_country" = "ISO2"))
?subset
europe_arr <- match_df(amm, EUISO2, on = ISO2)
library(plyr)
europe_arr <- match_df(amm, EUISO2, on = ISO2)
europe_arr <- match_df(amm, EUISO2, on = dep_country)
europe_arr <- match_df(amm, EUISO2, on = "dep_country")
europe_arr <- EUISO2[which(EUISO2$ISO2 %in% unique(amm$arr_country) |
EUISO2$ISO2 %in% unique(amm$dep_country)),]
View(europe_arr)
europe_arr <- amm[which(amm$arr_country %in% unique(EUISO2$ISO2) |
amm$dep_country %in% unique(EUISO2$ISO2)),]
View(europe_arr)
europe_arr <- amm[which(amm$arr_country %in% unique(EUISO2$ISO2),}
europe_arr <- amm[which(amm$arr_country %in% unique(EUISO2$ISO2)),]
View(europe_arr)
europe_arr$arr_country
europe_dep <- amm[which(amm$dep_country %in% unique(EUISO2$ISO2)),]
View(europe_dep)
ggplot() +
geom_sf(data=europe)+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23) +
ggtitle("Departure and arrival locations for all european flights separated by symbols")+
xlab("Longitude") + ylab("Latitude")+
scale_color_manual(labels = c("Arrival", "Departure"),
values = c("red", "blue"))+
labs(colour = "Flight path")+
theme(legend.position = "none")
ggplot() +
geom_sf(data=europe)+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23) +
ggtitle("Departure and arrival locations for all european flights separated by symbols")+ xlab("Longitude") + ylab("Latitude")+
scale_color_manual(labels = c("Arrival", "Departure"),
values = c("red", "blue"))+
labs(colour = "Flight path")+
theme(legend.position = "none")
ggplot() +
geom_sf(data=europe)+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23)
View(world)
europe$Name <- NULL
#ISO2 form european countries
EUISO2 <- read.csv(file.path(dataFolder, "EuroAlpha2-Codes.csv"), sep = ";")
EUISO2$X <- NULL
EUISO2$ï..Name<-gsub("Â","",as.character(EUISO2$ï..Name))
names(EUISO2)[1] <- "Name"
#subset of european countries from world df
europe<- left_join(EUISO2, world)
europe$Name <- NULL
#just european flights arrival and departure
europe_arr <- amm[which(amm$arr_country %in% unique(EUISO2$ISO2)),]
europe_dep <- amm[which(amm$dep_country %in% unique(EUISO2$ISO2)),]
ggplot() +
geom_sf(data=europe)+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23)
arr <-ggplot() +
geom_sf(data=europe)+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23)
#+
#ggtitle("Departure and arrival locations for all european flights separated by symbols")+ xlab("Longitude") + ylab("Latitude")+
#scale_color_manual(labels = c("Arrival", "Departure"),
#                  values = c("red", "blue"))+
#labs(colour = "Flight path")+
#theme(legend.position = "none")
arrdep_europe <-ggplot() +
geom_sf(data=europe)+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23) +
ggtitle("Departure and arrival locations for all european flights separated by symbols")+ xlab("Longitude") + ylab("Latitude")+
scale_color_manual(labels = c("Arrival", "Departure"),
values = c("red", "blue"))+
labs(colour = "Flight path")+
theme(legend.position = "none")
arrdep_europe
arrdep_europe <-ggplot() +
geom_sf(data=europe, aes(geometry = geometry))+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23) +
ggtitle("Departure and arrival locations for all european flights separated by symbols")+ xlab("Longitude") + ylab("Latitude")+
scale_color_manual(labels = c("Arrival", "Departure"),
values = c("red", "blue"))+
labs(colour = "Flight path")+
theme(legend.position = "none")
arrdep_europe <-ggplot() +
geom_sf(data=europe, aes(geometry = geometry))+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23) +
ggtitle("Departure and arrival locations for all european flights separated by symbols")+ xlab("Longitude") + ylab("Latitude")+
scale_color_manual(labels = c("Arrival", "Departure"),
values = c("red", "blue"))+
labs(colour = "Flight path")+
theme(legend.position = "none")
arrdep_europe
europe_ohne_RU <-subset(europe, ISO2!= "RU")
arrdep_europe <-ggplot() +
geom_sf(data=europe_ohne_RU, aes(geometry = geometry))+
geom_sf(data = europe_dep, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = .5, shape = 23) +
geom_sf(data = europe_arr, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = .5, shape = 23) +
ggtitle("Departure and arrival locations for all european flights separated by symbols")+ xlab("Longitude") + ylab("Latitude")+
scale_color_manual(labels = c("Arrival", "Departure"),
values = c("red", "blue"))+
labs(colour = "Flight path")+
theme(legend.position = "none")
arrdep_europe
