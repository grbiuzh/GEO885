library(shiny)
library(geosphere)
library(readxl)
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx")
amm_NONA_complete <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/R/amm_NONA_complete.csv")
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
amm_distance <- amm
airports_distance <- airports
knitr::opts_chunk$set(echo = TRUE)
Sys.setenv(LANG = "en")
library(tidyverse)
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggmap)
library(flightplot)
library(sf)
library(shiny)
library(geosphere)
library(readxl)
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx")
amm <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/R/amm_NONA_complete.csv")
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
amm_distance <- amm
airports_distance <- airports
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports_distance <- airports_distance %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports_distance <- subset(airports_distance, iata_code != "")
airports <- airports %>% st_as_sf(coords = c("longitude_deg", "latitude_deg"), crs = 4326) %>% rename(coordinates = geometry)
amm <- amm %>% rename(flight_number = Flugnummer,
DEPARTURE_AIRPORT = Abflug,
ARRIVAL_AIRPORT = Destination,
EMISSIONS_KGCO2EQ = "THG-Emissionen (in t CO2e)",
cabin_class = Serviceklasse,
currencies = "Kosten (in CHF)",
year = Jahr,
distance = "Distanz (in km)")
knitr::opts_chunk$set(echo = TRUE)
Sys.setenv(LANG = "en")
library(tidyverse)
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggmap)
library(flightplot)
library(sf)
library(shiny)
library(geosphere)
library(readxl)
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx")
amm <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/R/amm_NONA_complete.csv")
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
amm_distance <- amm
airports_distance <- airports
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports_distance <- airports_distance %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports_distance <- subset(airports_distance, iata_code != "")
airports <- airports %>% st_as_sf(coords = c("longitude_deg", "latitude_deg"), crs = 4326) %>% rename(coordinates = geometry)
amm_incomplete <- amm_incomplete %>% rename(flight_number = Flugnummer,
DEPARTURE_AIRPORT = Abflug,
ARRIVAL_AIRPORT = Destination,
EMISSIONS_KGCO2EQ = "THG-Emissionen (in t CO2e)",
cabin_class = Serviceklasse,
currencies = "Kosten (in CHF)",
year = Jahr,
distance = "Distanz (in km)")
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "Y"] <- "economy"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "B"] <- "business"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "F"] <- "first"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "P"] <- "premium_economy"
amm_incomplete$currencies <- "USD"
amm_incomplete <- amm_incomplete %>% dplyr::select(-c(EMISSIONS_KGCO2EQ, distance))
amm_incomplete <- amm_incomplete %>%
separate("flight_number",
into = c("fn_code", "fn_number"),
sep = "(?<=[A-Za-z])(?=[0-9])")
amm_NONA <- amm[!is.na(amm$fn_code),]
amm_NONA <- subset(amm_NONA, RecID != 6869)
write.csv(amm_incomplete, file = "amm_incomplete.csv", row.names=FALSE)
write.csv(amm_NONA, file = "amm_NONA.csv", row.names=FALSE) # Emissions API geht mit beiden files oben
amm_arr <- left_join(amm,airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_arr <- amm_arr %>% rename(arr_coordinates = coordinates,
dep_country = iso_country)
amm <- left_join(amm,airports, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm <- amm %>% rename(dep_coordinates = coordinates,
dep_country = iso_country)
amm <- left_join(amm,airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm <- amm %>% rename(arr_coordinates = coordinates,
arr_country = iso_country)
amm <- amm %>% mutate(EMISSIONS_KGCO2EQ = (EMISSIONS_KGCO2EQ * 1000))
View(amm)
amm <- amm %>% as.numveric(EMISSIONS_KGCO2EQ)
amm <- amm %>% as.numeric(EMISSIONS_KGCO2EQ)
amm <- as.numeric(amm$EMISSIONS_KGCO2EQ)
amm <- amm %>% mutate(EMISSIONS_KGCO2EQ = (EMISSIONS_KGCO2EQ * 1000))
knitr::opts_chunk$set(echo = TRUE)
Sys.setenv(LANG = "en")
library(tidyverse)
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggmap)
library(flightplot)
library(sf)
library(shiny)
library(geosphere)
library(readxl)
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx")
amm <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/R/amm_NONA_complete.csv")
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
amm_distance <- amm
airports_distance <- airports
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports_distance <- airports_distance %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports_distance <- subset(airports_distance, iata_code != "")
airports <- airports %>% st_as_sf(coords = c("longitude_deg", "latitude_deg"), crs = 4326) %>% rename(coordinates = geometry)
amm_incomplete <- amm_incomplete %>% rename(flight_number = Flugnummer,
DEPARTURE_AIRPORT = Abflug,
ARRIVAL_AIRPORT = Destination,
EMISSIONS_KGCO2EQ = "THG-Emissionen (in t CO2e)",
cabin_class = Serviceklasse,
currencies = "Kosten (in CHF)",
year = Jahr,
distance = "Distanz (in km)")
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "Y"] <- "economy"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "B"] <- "business"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "F"] <- "first"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "P"] <- "premium_economy"
amm_incomplete$currencies <- "USD"
amm_incomplete <- amm_incomplete %>% dplyr::select(-c(EMISSIONS_KGCO2EQ, distance))
amm_incomplete <- amm_incomplete %>%
separate("flight_number",
into = c("fn_code", "fn_number"),
sep = "(?<=[A-Za-z])(?=[0-9])")
amm_NONA <- amm[!is.na(amm$fn_code),]
amm_NONA <- subset(amm_NONA, RecID != 6869)
write.csv(amm_incomplete, file = "amm_incomplete.csv", row.names=FALSE)
write.csv(amm_NONA, file = "amm_NONA.csv", row.names=FALSE) # Emissions API geht mit beiden files oben
amm_arr <- left_join(amm,airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_arr <- amm_arr %>% rename(arr_coordinates = coordinates,
dep_country = iso_country)
amm <- left_join(amm,airports, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm <- amm %>% rename(dep_coordinates = coordinates,
dep_country = iso_country)
amm <- left_join(amm,airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm <- amm %>% rename(arr_coordinates = coordinates,
arr_country = iso_country)
drop <- c("id.x", "id.y")
amm = amm[,!(names(amm) %in% drop)]
amm_distance <- left_join(amm_distance,airports_distance, by = c("Abflug" = "iata_code"))
View(amm_distance)
amm_distance <- left_join(amm_distance,airports_distance, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm_distance <- left_join(amm_distance, airports_distance, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_distance <- amm_distance %>% rename(dep_lon = longitude_deg.x,
dep_lat = latitude_deg.x,
arr_lon = longitude_deg.y,
arr_lat = latitude_deg.y)
amm_distance <- amm_distance %>% rowwise() %>%
mutate(distance_km = (geosphere::distHaversine(c(dep_lon, dep_lat),
c(arr_lon, arr_lat)))/1000)
view(amm_distance)
view(airports_distance)
amm_distance_count <- amm_distance %>% group_by(Jahr) %>% summarize(distance_sum = sum(distance_km, na.rm=TRUE))
knitr::opts_chunk$set(echo = TRUE)
Sys.setenv(LANG = "en")
library(tidyverse)
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggmap)
library(flightplot)
library(sf)
library(shiny)
library(geosphere)
library(readxl)
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx")
amm <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/R/amm_NONA_complete.csv")
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
amm_distance <- amm
airports_distance <- airports
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports_distance <- airports_distance %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports_distance <- subset(airports_distance, iata_code != "")
airports <- airports %>% st_as_sf(coords = c("longitude_deg", "latitude_deg"), crs = 4326) %>% rename(coordinates = geometry)
amm_incomplete <- amm_incomplete %>% rename(flight_number = Flugnummer,
DEPARTURE_AIRPORT = Abflug,
ARRIVAL_AIRPORT = Destination,
EMISSIONS_KGCO2EQ = "THG-Emissionen (in t CO2e)",
cabin_class = Serviceklasse,
currencies = "Kosten (in CHF)",
year = Jahr,
distance = "Distanz (in km)")
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "Y"] <- "economy"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "B"] <- "business"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "F"] <- "first"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "P"] <- "premium_economy"
amm_incomplete$currencies <- "USD"
amm_incomplete <- amm_incomplete %>% dplyr::select(-c(EMISSIONS_KGCO2EQ, distance))
amm_incomplete <- amm_incomplete %>%
separate("flight_number",
into = c("fn_code", "fn_number"),
sep = "(?<=[A-Za-z])(?=[0-9])")
amm_NONA <- amm[!is.na(amm$fn_code),]
amm_NONA <- subset(amm_NONA, RecID != 6869)
write.csv(amm_incomplete, file = "amm_incomplete.csv", row.names=FALSE)
write.csv(amm_NONA, file = "amm_NONA.csv", row.names=FALSE) # Emissions API geht mit beiden files oben
amm_arr <- left_join(amm,airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_arr <- amm_arr %>% rename(arr_coordinates = coordinates,
dep_country = iso_country)
amm <- left_join(amm,airports, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm <- amm %>% rename(dep_coordinates = coordinates,
dep_country = iso_country)
amm <- left_join(amm,airports, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm <- amm %>% rename(arr_coordinates = coordinates,
arr_country = iso_country)
drop <- c("id.x", "id.y")
amm = amm[,!(names(amm) %in% drop)]
amm_distance <- left_join(amm_distance,airports_distance, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm_distance <- left_join(amm_distance, airports_distance, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_distance <- amm_distance %>% rename(dep_lon = longitude_deg.x,
dep_lat = latitude_deg.x,
arr_lon = longitude_deg.y,
arr_lat = latitude_deg.y)
amm_distance <- amm_distance %>% rowwise() %>%
mutate(distance_km = (geosphere::distHaversine(c(dep_lon, dep_lat),
c(arr_lon, arr_lat)))/1000)
view(amm_distance)
view(airports_distance)
amm_distance_count <- amm_distance %>% group_by(year) %>% summarize(distance_sum = sum(distance_km, na.rm=TRUE))
ggplot(amm_distance_count, aes(x=year, y = distance_sum))+
geom_line()
ggplot(amm_distance, aes(factor(year), distance_km, col = cabin_class))+
geom_point(size = .5)
amm_emissions_byyear <- amm %>% group_by(year) %>% summarize(emissions_sum_kg = sum(EMISSIONS_KGCO2EQ, na.rm=TRUE))
amm_arr <- st_as_sf(amm_arr)
flightmap <- st_join(world, amm_arr, join = st_contains_properly, left=TRUE)
flightmap_sort <- flightmap %>% group_by(NAME) %>% count()
sf::sf_use_s2(FALSE)
knitr::opts_chunk$set(echo = TRUE)
Sys.setenv(LANG = "en")
library(tidyverse)
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggmap)
library(flightplot)
library(sf)
library(shiny)
library(geosphere)
library(readxl)
# sf::sf_use_s2(FALSE)
amm_arr <- st_as_sf(amm_arr)
flightmap <- st_join(world, amm_arr, join = st_contains_properly, left=TRUE)
flightmap_sort <- flightmap %>% group_by(NAME) %>% count()
view(flightmap_sort)
# create map
ggplot() +
geom_sf(data=world)+
geom_sf(data = flightmap_sort, aes(fill = n)) +
labs(fill = "Locations per country") +
scico::scale_fill_scico(palette = "bilbao")+
theme(panel.grid.minor = element_blank())+
ggtitle("Arrival locations for all GIUZ flights counnted by country")+
xlab("Longitude") + ylab("Latitude")+
theme(legend.position = "none")
ggplot() +
geom_sf(data=world)+
geom_sf(data = amm, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = 1, shape = 23) +
geom_sf(data = amm, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = 1, shape = 23) +
ggtitle("Departure and arrival locations for all GIUZ flights separated by symbols")+
xlab("Longitude") + ylab("Latitude")
amm_distance <- left_join(amm_distance,airports_distance, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm_distance <- left_join(amm_distance, airports_distance, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_distance <- amm_distance %>% rename(dep_lon = longitude_deg.x,
dep_lat = latitude_deg.x,
arr_lon = longitude_deg.y,
arr_lat = latitude_deg.y)
View(amm_distance)
count(amm$DEPARTURE_AIRPORT = "MISSING")
count(amm$DEPARTURE_AIRPORT == "MISSING")
group_by(amm$DEPARTURE_AIRPORT) %>% count()
nchar(amm$DEPARTURE_AIRPORT)
amm %>%
group_by(DEPARTURE_AIRPORT) %>%
count()
missing_count <- amm %>%
group_by(DEPARTURE_AIRPORT) %>%
count()
View(missing_count)
6824/1700
1700/6824
ggplot() +
geom_sf(data=world)+
geom_sf(data = amm, aes(geometry = dep_coordinates, col = "dep_coordinates"), size = 1, shape = 23) +
geom_sf(data = amm, aes(geometry = arr_coordinates, col = "arr_coordinates"), size = 1, shape = 23) +
ggtitle("Departure and arrival locations for all GIUZ flights separated by symbols")+
xlab("Longitude") + ylab("Latitude")
amm_arr <- st_as_sf(amm_arr)
flightmap <- st_join(world, amm_arr, join = st_contains_properly, left=TRUE)
flightmap_sort <- flightmap %>% group_by(NAME) %>% count()
view(flightmap_sort)
# create map
ggplot() +
geom_sf(data=world)+
geom_sf(data = flightmap_sort, aes(fill = n)) +
labs(fill = "Locations per country") +
scico::scale_fill_scico(palette = "bilbao")+
theme(panel.grid.minor = element_blank())+
ggtitle("Arrival locations for all GIUZ flights counnted by country")+
xlab("Longitude") + ylab("Latitude")+
theme(legend.position = "none")
View(flightmap_sort)
amm_distance <- left_join(amm_distance,airports_distance, by = c("DEPARTURE_AIRPORT" = "iata_code"))
amm_distance <- left_join(amm_distance, airports_distance, by = c("ARRIVAL_AIRPORT" = "iata_code"))
amm_distance <- amm_distance %>% rename(dep_lon = longitude_deg.x,
dep_lat = latitude_deg.x,
arr_lon = longitude_deg.y,
arr_lat = latitude_deg.y)
flightpath <- cbind(amm$DEPARTURE_AIRPORT,
amm$ARRIVAL_AIRPORT) %>% as.data.frame()
flightpath <- flightpath %>% rename(Departure = V1,
Arrival = V2)
flightpath <- subset(flightpath, Departure != "" & Arrival != "")
plot_flights(flightpath)
average_co2_18_20 <- amm %>% group_by(year) %>% summarize(mean = mean(EMISSIONS_KGCO2EQ, na.rm=TRUE))
baseline_co2 <- mean(average_co2_18_20$mean)
reference_period <- c(2018:2020)
target_period <- c(2022, 2030)
full_period <- c(2018:2030)
aggregated_uzh <- amm %>%
group_by(year) %>%
summarise(total_emission = sum(EMISSIONS_KGCO2EQ, na.rm=TRUE)) %>%
mutate(total_emission_3y_mean = slide_dbl(total_emission, mean,
.before = 1, .after = 1,
.complete = T))
# Total air travel at Giuz
total_co2_plot <- ggplot() +
geom_line(data=uzh_target_co2,
aes(x, y, color="target UZH"), linetype="dashed",
size=1) +
ylab("kg CO2 eq.") +
scale_x_continuous(breaks=full_period,
limits=c(min(full_period),
max(full_period))) +
scale_y_continuous(label=comma,
limits=c(0,max_co2*1.02)) +
ggtitle("UZH air travel (2018-2020): emissions")+
scale_colour_manual("",
breaks = c("target UZH"),
values = c("orange"))+
theme_bw() +
theme(text = element_text(size=16),
axis.title.x = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
legend.position = c(0, 0))
amm_missing <- amm %>% filter(DEPARTURE_AIRPORT == "MISSING")
View(amm_missing)
write.csv(amm_missing, file = "amm_missing.csv", row.names=FALSE)
View(amm_incomplete)
knitr::opts_chunk$set(echo = TRUE)
Sys.setenv(LANG = "en")
library(tidyverse)
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggmap)
library(flightplot)
library(sf)
library(shiny)
library(geosphere)
library(readxl)
# sf::sf_use_s2(FALSE)
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx") #Datensatz mit allen Flügen, vollständig und unvollständig
amm <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/R/amm_NONA_complete.csv")
# Alle Flugdaten mit "MISSING" values
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
amm_distance <- amm
airports_distance <- airports
View(airports_distance)
amm_NA <- amm[is.na(amm$fn_code),]
View(amm_NA)
amm_NA <- amm_incomplete[is.na(amm_incomplete$fn_code),]
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx") #Datensatz mit allen Flügen, vollständig und unvollständig
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports_distance <- airports_distance %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports_distance <- airports
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx") #Datensatz mit allen Flügen, vollständig und unvollständig
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports <- airports %>% st_as_sf(coords = c("longitude_deg", "latitude_deg"), crs = 4326) %>% rename(coordinates = geometry)
amm_incomplete <- amm_incomplete %>% rename(flight_number = Flugnummer,
DEPARTURE_AIRPORT = Abflug,
ARRIVAL_AIRPORT = Destination,
EMISSIONS_KGCO2EQ = "THG-Emissionen (in t CO2e)",
cabin_class = Serviceklasse,
currencies = "Kosten (in CHF)",
year = Jahr,
distance = "Distanz (in km)")
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "Y"] <- "economy"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "B"] <- "business"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "F"] <- "first"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "P"] <- "premium_economy"
amm_incomplete$currencies <- "USD"
amm_incomplete <- amm_incomplete %>% dplyr::select(-c(EMISSIONS_KGCO2EQ, distance))
amm_incomplete <- amm_incomplete %>%
separate("flight_number",
into = c("fn_code", "fn_number"),
sep = "(?<=[A-Za-z])(?=[0-9])")
amm_NONA <- amm[!is.na(amm$fn_code),]
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx") #Datensatz mit allen Flügen, vollständig und unvollständig
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports <- airports %>% st_as_sf(coords = c("longitude_deg", "latitude_deg"), crs = 4326) %>% rename(coordinates = geometry)
amm_incomplete <- amm_incomplete %>% rename(flight_number = Flugnummer,
DEPARTURE_AIRPORT = Abflug,
ARRIVAL_AIRPORT = Destination,
EMISSIONS_KGCO2EQ = "THG-Emissionen (in t CO2e)",
cabin_class = Serviceklasse,
currencies = "Kosten (in CHF)",
year = Jahr,
distance = "Distanz (in km)")
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "Y"] <- "economy"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "B"] <- "business"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "F"] <- "first"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "P"] <- "premium_economy"
amm_incomplete$currencies <- "USD"
amm_incomplete <- amm_incomplete %>% dplyr::select(-c(EMISSIONS_KGCO2EQ, distance))
amm_incomplete <- amm_incomplete %>%
separate("flight_number",
into = c("fn_code", "fn_number"),
sep = "(?<=[A-Za-z])(?=[0-9])")
amm_NONA <- amm_incomplete[!is.na(amm$fn_code),]
amm_NONA <- amm_incomplete[!is.na(amm_incomplete$fn_code),]
amm_NONA <- subset(amm_NONA, RecID != 6869)
write.csv(amm_incomplete, file = "amm_incomplete.csv", row.names=FALSE)
write.csv(amm_NONA, file = "amm_NONA.csv", row.names=FALSE) # Emissions API geht mit beiden files oben, Datensatz
airports_distance <- airports
airports_distance <- airports_distance %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx") #Datensatz mit allen Flügen, vollständig und unvollständig
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports <- airports %>% st_as_sf(coords = c("longitude_deg", "latitude_deg"), crs = 4326) %>% rename(coordinates = geometry)
amm_incomplete <- amm_incomplete %>% rename(flight_number = Flugnummer,
DEPARTURE_AIRPORT = Abflug,
ARRIVAL_AIRPORT = Destination,
EMISSIONS_KGCO2EQ = "THG-Emissionen (in t CO2e)",
cabin_class = Serviceklasse,
currencies = "Kosten (in CHF)",
year = Jahr,
distance = "Distanz (in km)")
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "Y"] <- "economy"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "B"] <- "business"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "F"] <- "first"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "P"] <- "premium_economy"
amm_incomplete$currencies <- "USD"
amm_incomplete <- amm_incomplete %>% dplyr::select(-c(EMISSIONS_KGCO2EQ, distance))
amm_incomplete <- amm_incomplete %>%
separate("flight_number",
into = c("fn_code", "fn_number"),
sep = "(?<=[A-Za-z])(?=[0-9])")
amm_NONA <- amm_incomplete[!is.na(amm_incomplete$fn_code),]
amm_NONA <- subset(amm_NONA, RecID != 6869)
write.csv(amm_NONA, file = "amm_NONA.csv", row.names=FALSE) # Emissions API geht mit beiden files oben, Datensatz
airports_distance <- airports
airports_distance <- airports_distance %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- read.csv("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/GIUZ_AirTravel_20210509/airports.csv")
amm_incomplete <- read_excel("~/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/MNF_amm.xlsx") #Datensatz mit allen Flügen, vollständig und unvollständig
world <- st_read("/Users/chaualala/Desktop/UZH/MSc Geographie/2. Semester/GEO885 - GIS Science Project/GEO885/Data and Code/TM_WORLD_BORDERS_SIMPL-0 Kopie")
airports <- airports %>% dplyr::select(-c(continent, home_link, wikipedia_link, elevation_ft, municipality, scheduled_service, type, keywords, name, ident, iso_region, gps_code,local_code))
airports <- subset(airports, iata_code != "")
airports <- airports %>% st_as_sf(coords = c("longitude_deg", "latitude_deg"), crs = 4326) %>% rename(coordinates = geometry)
amm_incomplete <- amm_incomplete %>% rename(flight_number = Flugnummer,
DEPARTURE_AIRPORT = Abflug,
ARRIVAL_AIRPORT = Destination,
EMISSIONS_KGCO2EQ = "THG-Emissionen (in t CO2e)",
cabin_class = Serviceklasse,
currencies = "Kosten (in CHF)",
year = Jahr,
distance = "Distanz (in km)")
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "Y"] <- "economy"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "B"] <- "business"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "F"] <- "first"
amm_incomplete$cabin_class[amm_incomplete$cabin_class == "P"] <- "premium_economy"
amm_incomplete$currencies <- "USD"
amm_incomplete <- amm_incomplete %>% dplyr::select(-c(EMISSIONS_KGCO2EQ, distance))
amm_incomplete <- amm_incomplete %>%
separate("flight_number",
into = c("fn_code", "fn_number"),
sep = "(?<=[A-Za-z])(?=[0-9])")
amm_incomplete <- subset(amm_incomplete, RecID != 6869)
write.csv(amm_incomplete, file = "amm_incomplete.csv", row.names=FALSE) # Emissions API geht mit beiden files oben, Datensatz
